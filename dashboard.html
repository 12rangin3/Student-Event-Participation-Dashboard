<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Student Event Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="style.css" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      body {
        background: url('https://img.freepik.com/premium-photo/dark-photo-dark-background-with-full-moon-background_994023-500303.jpg')
          no-repeat center center fixed;
        background-size: cover;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        color: #0b1220;
        margin: 0;
      }

      .container-limited {
        max-width: 1400px;
        margin: 18px auto;
      }

      /* === Transparent blur styling applied here === */
      .metric-box,
      .chart-card,
      .table-card,
      .kpi-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      }

      .kpi-card {
        border-radius: 6px;
        padding: 18px;
      }

      .kpi-number {
        font-size: 2.2rem;
        font-weight: 700;
        color: #e0f2ff;
      }

      .small-muted {
        color: #cbd5e1;
        font-size: 0.9rem;
      }

      .dashboard-header {
        background: rgba(8, 145, 178, 0.85);
        backdrop-filter: blur(8px);
        border-radius: 8px;
        color: #fff;
        padding: 14px 18px;
      }

      .attended-badge {
        color: #065f46;
        background: rgba(209, 250, 229, 0.7);
        padding: 6px 10px;
        border-radius: 999px;
        display: inline-block;
        font-weight: 600;
      }

      .absent-badge {
        color: #7f1d1d;
        background: rgba(255, 235, 238, 0.7);
        padding: 6px 10px;
        border-radius: 999px;
        display: inline-block;
        font-weight: 600;
      }

      .chart-container {
        height: 320px;
        min-height: 160px;
      }

      @media (max-width: 991px) {
        .chart-container {
          height: 260px;
        }
      }
    </style>
  </head>

  <body>
    <!-- Main Content -->
    <div class="main-content">
      <div class="container-limited">
        <!-- header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="dashboard-header d-flex align-items-center gap-3 w-100">
            <div
              style="
                width: 44px;
                height: 44px;
                border-radius: 10px;
                background: rgba(255, 255, 255, 0.08);
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <i class="fas fa-chart-pie" style="font-size: 1.15rem"></i>
            </div>
            <div>
              <div style="font-weight: 700; font-size: 1.05rem ">
                Event Participation Dashboard
              </div>
            </div>
          </div>
        </div>

        <!-- controls -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div
            style="
              display: flex;
              gap: 12px;
              align-items: flex-end;
              flex-wrap: wrap;
            "
          >
            <div>
              <label class="small-muted mb-1 d-block">Event</label>
              <select
                id="eventSelect"
                class="form-select"
                style="min-width: 320px"
              >
                <option value="">Loading events...</option>
              </select>
            </div>

            <div style="display: none;">
              <label class="small-muted mb-1 d-block"
                >Search (ID / name / dept)</label
              >
              <div style="display: flex; gap: 6px">
                <button id="searchStudentBtn" class="btn btn-primary">
                  Search by Student_ID
                </button>
                <button id="resetBtn" class="btn btn-outline-secondary">
                  <i class="fas fa-rotate-right"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- KPIs -->
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Total student</div>
              <div class="kpi-number" id="kpiUniqueStudents">0</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Total Events</div>
              <div class="kpi-number" id="kpiUniqueEvents">0</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Total Participants (records)</div>
              <div class="kpi-number" id="kpiTotalParticipants">0</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="metric-box kpi-card text-center">
              <div class="small-muted">Attendance %</div>
              <div class="kpi-number" id="kpiAttendancePercent">0%</div>
            </div>
          </div>
        </div>

        <!-- charts row 1 -->
        <div class="row g-3 mb-4">
          <div class="col-lg-7">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold text-light">
                  <i class="fas fa-users me-2 text-primary"></i>No of participation by Department Gender
                </h6>
                <small class="small-muted">Gender split</small>
              </div>
              <div class="chart-container">
                <canvas id="deptGenderChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-5">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold text-light">
                  <i class="fas fa-chart-bar me-2 text-light"></i>Count of
                  Student_ID by Event_Name
                </h6>
                <small class="small-muted">Top events</small>
              </div>
              <div class="chart-container">
                <canvas id="eventCountChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- charts row 2 -->
        <div class="row g-3 mb-4">
          <div class="col-lg-4">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold text-light">
                  <i class="fas fa-donut-small me-2 text-primary"></i>Total
                  Participants by Event_Type
                </h6>
                <small class="small-muted">Distribution</small>
              </div>
              <div class="chart-container" style="height: 240px">
                <canvas id="eventTypeChart"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-8">
            <div class="chart-card p-3">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h6 class="mb-0 fw-bold text-light">
                  <i class="fas fa-line-chart me-2 text-primary"></i>Total
                  Participants by Year
                </h6>
                <small class="small-muted">Trend</small>
              </div>
              <div class="chart-container" style="height: 240px">
                <canvas id="yearlyChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- participants table -->
        <div class="table-card p-3 mb-5">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0 fw-bold text-light">
              <i class="fas fa-list me-2 text-primary"></i>Participants (Preview)
            </h6>
            <small class="small-muted"
              >Click a student name to open details</small
            >
          </div>

          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Student Name</th>
                  <th>Department</th>
                  <th>Role</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="participantsTableBody">
                <tr>
                  <td colspan="4" class="text-center text-muted py-4">
                    Select an event to view participants
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="dashboard.js"></script>

    <script>
      function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("active");
      }
    </script>
  </body>
</html>
s